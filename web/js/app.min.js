let YoutDomain="";class Ajax{getdata(e,t,a=function(){}){let o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json; charset=utf-8"),o.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content")),o.send(JSON.stringify(t)),o.onreadystatechange=function(){4==o.readyState&&(ans=JSON.parse(o.responseText),console.log(ans),succses(ans))}}}document.querySelectorAll(".unical-form").forEach(e=>{e.addEventListener("submit",t=>{t.preventDefault(),t.stopImmediatePropagation;let a={};e.querySelectorAll("input").forEach(e=>{a[e.name]=e.value}),e.querySelector("button").classList.add("hidden"),e.querySelector("input").setAttribute("disabled",!0);let o=document.querySelector(".unical-result");return getdata(e.dataset.method,a,e=>{1===e.status?(o.classList.add("active"),o.querySelector("a").innerHTML=YoutDomain+"/"+e.data.alias,o.querySelector("a").setAttribute("href","https://"+YoutDomain+"/"+e.data.alias)):(o.classList.add("error"),o.querySelector("p").innerHTML=e.error)}),!1})}),document.querySelectorAll("*[data-copy]").forEach(e=>{e.addEventListener("click",()=>{console.log(e.dataset.copy);let t=document.querySelector(e.dataset.copy);if(console.log(t),t){var a,o;(a=document.createRange()).selectNode(t),(o=window.getSelection()).removeAllRanges,o.addRange(a),document.execCommand("copy");let n=e.innerHTML;e.innerHTML="Скопированно",e.classList.add("success-copy"),setTimeout(()=>{e.innerHTML=n,e.classList.remove("success-copy")},3e3)}})});